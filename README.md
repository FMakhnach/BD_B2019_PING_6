# Курс "Базы данных"

## Сервисы для проектирования

*  [DrawSQL](https://drawsql.app/)
*  [DbDesigner](https://www.dbdesigner.net)
*  [DbDesign](https://dbdesign.online/)
*  [PonyORM Editor](https://editor.ponyorm.com/)

## Многофункциональные сервисы

*  [Flowchart Maker & Online Diagram Software](rt.draw.io)
*  [Miro](https://miro.com/)
*  [Lucidchart](https://lucidchart.com/)

## Программы для проектирования

*  [StarUML](https://staruml.io)
*  [Visio](https://www.microsoft.com/ru-ru/microsoft-365/visio/flowchart-software)


## Задание 1

Вам поручено разработать онлайн-аукцион. Он позволяет продавцам продавать свои товары с помощью аукциона. Покупатели делают ставки. Выигрывает последняя самая высокая ставка. После закрытия аукциона победитель оплачивает товар с помощью кредитной карты. Продавец отвечает за доставку товара покупателю.

* Предложите список функциональных требований для проекта.
* Определите роли пользователей и действия для каждой роли.
* Определите объекты, о которых будут храниться данные.
* Определите связи между объектами для хранения данных.
* Нарисуйте схему объектной модели (используя любые обозначения, которые вам удобны).

 > Прием работ до до 18:00 12.09.2021. 

## Задание 2

**Задача 1.** Нарисуйте E/R диаграмму для библиотечной системы на основе следующих требований:
 * В библиотеки храняться экземпляры книг. Каждая копия (экземпляр) имеет свой уникальный номер копии, положение на полке и может быть однозначно идентифицирована с помощью номера копии вместе с ISBN. 
 * Каждая книга имеет уникальный номер ISBN, год, название, автора и количество страниц. 
 * Книги издаются издательствами. У издателя есть имя и адрес. 
 * В библиотечной системе книгам присвоена одна категория или несколько. Категории образуют иерархию, поэтому категория может быть просто другой подчиненой категорией (подкатегория). Категория имеет только имя и никаких других свойств. 
 * Каждому читателю присвается уникальный номер. У читателя есть Фамилия, Имя, адрес и день рождения. Читатель может взять один или несколько экземпляров книг. При взятии книги записывается запланированая дата возврата.  

 **Задача 2.** Смоделируйте следующие отношения в E/R.
  *  Квартира расположена в доме на улице в городе в стране
  *  Две команды играют друг против друга в футбол под руководством арбитра
  *  У каждого человека (мужчины и женщины) есть отец и мать

 **Задача 3.** Смоделируйте E/R-модель в виде E/R диаграммы

 ## Задание 3

1. Почему любое отношение в реляционной схеме имеет по крайней мере один ключ?
2. Переведите все диаграммы ER из предыдущей домашней работы в реляционные схемы.
3. Переведите приведенные диаграммы ER в реляционные схемы.
    3.1. https://imgur.com/w2iDI1o
    3.2. https://imgur.com/oFBM5pp

 ### Соглашение о приеме работ

* В папке с названием задания, создается папка с фамилией студента, в которой он работает
* Текстовы файлы оформляются в формате .md
* Изображения лежат рядом, в .md указываем ссылку
* Срок сдачи - до 23:59 25.09.2021. 
* Комиты можно писать на русском языке

## Задание 4

### Задача 1
Возьмите библиотечную систему, схему которой сделали на предыдущем задании

Reader( ID, LastName, FirstName, Address, BirthDate) 
Book ( ISBN, Title, Author, PagesNum, PubYear, PubName) 
Publisher ( PubName, PubAdress) 
Category ( CategoryName, ParentCat) 
Copy ( ISBN, CopyNumber, ShelfPosition) 

Borrowing ( ReaderNr, ISBN, CopyNumber, ReturnDate) 
BookCat ( ISBN, CategoryName )  

Напишите SQL-запросы (или выражения реляционной алгебры) для следующих вопросов:
а) Какие фамилии читателей в Москве?
б) Какие книги (author, title) брал Иван Иванов?
в) Какие книги (ISBN) из категории "Горы" не относятся к категории "Путешествия"? Подкатегории не обязательно принимать во внимание!
г) Какие читатели (LastName, FirstName) брали книги, которые были возвращены?
д) Какие читатели (LastName, FirstName) брали хотя бы одну книгу, которую брал также Иван Иванов (не включайте Ивана Иванова в результат)?

### Задача 2

Возьмите схему для Поездов, которую выполняли в предыдущем задании. 

City ( Name, Region ) 
Station ( Name, #Tracks, CityName, Region ) 
Train ( TrainNr, Length, StartStationName, EndStationName ) 
 ( FromStation, ToStation, TrainNr, Departure, Arrival) 

Предположим, что отношение "Connection" уже содержит транзитивное замыкание. Когда поезд 101 отправляется из Москвы в Санкт-Петербург через Тверь, содержит кортежи для связи Москва->Тверь, Тверь-Санкт-Петербург и Москва->Санкт-Петербург. Сформулируйте следующие запросы в реляционной алгебре:

а) Найдите все прямые рейсы из Москвы в Тверь.
б) Найдите все многосегментные маршруты, имеющие точно однодневный трансфер из Москвы в Санкт-Петербург (первое отправление и прибытие в конечную точку должны быть в одну и ту же дату). Вы можете применить функцию DAY () к атрибутам Departure и Arrival, чтобы определить дату.
в) Что изменится в выражениях для а) и б), если отношение "Connection" не содержит дополнительных кортежей для транзитивного замыкания, поэтому многосегментный маршрут Москва-> Тверь-> Санкт-Петербург содержит только кортежи Москва-> Тверь и Тверь-Санкт-Петербург?

### Задача 3
Представьте внешнее объединение (outer join ) в виде выражения реляционной алгебры с использованием только базовых операций (select, project, cartesian, rename, union, minus)

### Соглашение о приеме работ

* В папке с названием задания, создается папка с фамилией студента, в которой он работает
* Текстовы файлы оформляются в формате .md
* Изображения лежат рядом, в .md указываем ссылку
* Срок сдачи - до 18:00 03.09.2021. 
* Комиты можно писать на русском языке